<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    <meta charset="utf-8">
    <title>Slintta</title>
    <meta name="description" content="Slintta's home page">
    <meta name="author" content="Slintta & Asaka">
    <link rel="icon" type="image/png" href="/static/image/head.png">
    <link rel="apple-touch-icon" href="/static/image/head.png">
    <link rel="stylesheet" href="/static/typo.css">
    <link rel="stylesheet" href="/static/style.css">
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="http://libs.baidu.com/underscore/1.3.3/underscore-min.js"></script>
    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="post-nav">
      <div id="post-nav-slide" class="post-nav-item post-nav-slide" style="margin-top: 0;" data-index="current"></div>
      <div class="post-nav-line" style="height: <%= (32 + 25) * (posts.length + 1) - 25 %>px;"></div>
      <div class="post-nav-wrapper" style="margin-top: <%= - ((32 + 25) * (posts.length + 1) - 25) %>px;">
        <a class="post-nav-item" data-index="0" href="/posts" title="首页"></a>
        <% posts.forEach(function(post, index) { %>
          <a class="post-nav-item" data-index="<%= index + 1 %>" rel="#post-<%= post.timestamp.toString(36) %>" title="<%= post.title %>"></a>
        <% }) %>
      </div>
    </div>

    <div id="container">
      <div id="header">
      </div>

      <% posts.forEach(function(post, index) { %>
        <div class="post">
          <div class="title">
            <h1><a id="post-<%= post.timestamp.toString(36) %>" href="<%= "/post/" + post.timestamp.toString(36) %>"><%= post.title %></a></h1>
          </div>
          <div class="date">
            <p><%= post.date %></p>
          </div>
          <div class="content">
            <%- post.content %>
          </div>
        </div>

        <% if (index < posts.length - 1) { %>
          <hr />
        <% } %>

      <% }) %>

      <div id="footer">
        <hr />
        <p>❤ designed by Slintta &amp; made by Asaka</p>
      </div>
    </div>
  </body>
  <script>
$(function(){
  $(".post-nav-item").click(function(){
    var rel=$(this).attr("rel");
    var pos=$(rel).offset().top;
    $("html,body").animate({scrollTop:pos}, 400);
  });
  $(".post-nav-item").hover(_.throttle(function(e) {
    var target = $(e.target);
    var index = $(e.target).data("index");
    if (index === "current") {
      return;
    }
    $("#post-nav-slide").animate({"margin-top": index * 57 + "px"}, 400);
  }, 200), _.throttle(function(e) {
    $("#post-nav-slide").animate({"margin-top": 0}, 400);
  }, 200));
})
  </script>
</html>
